<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>tvision2docs â€“ Introduction</title><link>/docs/intro/</link><description>Recent content in Introduction on tvision2docs</description><generator>Hugo -- gohugo.io</generator><atom:link href="/docs/intro/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Hello world!</title><link>/docs/intro/hello-world/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/intro/hello-world/</guid><description>
&lt;p>Let&amp;rsquo;s see how we can create a &amp;ldquo;Hello World&amp;rdquo; program using TVision2. First, the code:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">using&lt;/span> &lt;span style="color:#000">Microsoft.Extensions.Hosting&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">using&lt;/span> &lt;span style="color:#000">System&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">using&lt;/span> &lt;span style="color:#000">System.Threading.Tasks&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">using&lt;/span> &lt;span style="color:#000">Microsoft.Extensions.DependencyInjection&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">using&lt;/span> &lt;span style="color:#000">Tvision2.Core&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">using&lt;/span> &lt;span style="color:#000">Tvision2.Core.Colors&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">using&lt;/span> &lt;span style="color:#000">Tvision2.Core.Components&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">using&lt;/span> &lt;span style="color:#000">Tvision2.Core.Render&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">namespace&lt;/span> &lt;span style="color:#000">Tvision2.HelloWorld&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">internal&lt;/span> &lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">Program&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">private&lt;/span> &lt;span style="color:#204a87;font-weight:bold">static&lt;/span> &lt;span style="color:#204a87;font-weight:bold">async&lt;/span> &lt;span style="color:#000">Task&lt;/span> &lt;span style="color:#000">Main&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#000;font-weight:bold">[]&lt;/span> &lt;span style="color:#000">args&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">builder&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">HostBuilder&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>
&lt;span style="color:#000">builder&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseTvision2&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">setup&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">setup&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseDotNetConsoleDriver&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>
&lt;span style="color:#000">setup&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Options&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseStartup&lt;/span>&lt;span style="color:#000;font-weight:bold">((&lt;/span>&lt;span style="color:#000">sp&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">tui&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">helloWorld&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvComponent&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Hello world!&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddDrawer&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DrawStringAt&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Zero&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvColorPair&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Blue&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Yellow&lt;/span>&lt;span style="color:#000;font-weight:bold">))&lt;/span> &lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000;font-weight:bold">});&lt;/span>
&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddViewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Viewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">FromXY&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;span style="color:#000">tui&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UI&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Add&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">Task&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">CompletedTask&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000;font-weight:bold">});&lt;/span>
&lt;span style="color:#000;font-weight:bold">}).&lt;/span>&lt;span style="color:#000">UseConsoleLifetime&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">await&lt;/span> &lt;span style="color:#000">builder&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">RunTvisionConsoleApp&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This code the &lt;code>Hello world!&lt;/code> string at position (10,10) with a blue foreground and a yellow background. Yes, probably you are thinking &amp;ldquo;that&amp;rsquo;s a lot of code for just printing a string&amp;rdquo; and you are true, but this is just because the sample is too simple to show all TVision2 power. But anyway, let&amp;rsquo;s see the main components of it.&lt;/p>
&lt;p>First, you need to configure some aspects of TVision2 before starting your app. This is done through the extension method &lt;code>UseTvision2&lt;/code> of the &lt;code>IHostBuilder&lt;/code> interface. That method expects an &lt;code> Action&amp;lt;Tvision2Setup&amp;gt;&lt;/code> with the setup code. In this case we are using the &lt;code>UseDotNetConsoleDriver&lt;/code> that forces TVision2 to use the pure netcore-based console driver. A console driver is how TVision2 will interact with the real console (as you will see, as a developer, you never access directly to the console). There are various console drivers, each one with their weaknesses and strenghtnesses.&lt;/p>
&lt;p>Then, we are using the simplest way to start the application which is using the &lt;code>UseStartup&lt;/code> method to provide the code of our application. On more complex applications another way (using a separated &lt;em>startup&lt;/em> class) is preferred. When using &lt;code>UseStartup&lt;/code> you have access to two parameters: an &lt;code>IServiceProvider&lt;/code> which gives you access to some TVision2 objects and a &lt;code>ITuiEngine&lt;/code> wich holds the TVision2 engine. In the &lt;code>UseStartup&lt;/code> method we do following things:&lt;/p>
&lt;ol>
&lt;li>Create a &lt;code>TvComponent&amp;lt;string&amp;gt;&lt;/code> class. This creates a &lt;em>component&lt;/em> that holds an &lt;code>string&lt;/code> object. Components are the main objects in TVision2: your application is composed of a set of components that interact. All components are instances of the &lt;strong>sealed&lt;/strong> &lt;code>TvComponent&amp;lt;T&amp;gt;&lt;/code> class. TVision2 prefers composition over inheritance, so &lt;strong>you can&amp;rsquo;t inherit from &lt;code>TvComponent&amp;lt;T&amp;gt;&lt;/code>&lt;/strong>.&lt;/li>
&lt;li>Then we add a drawer to our component. A drawer is a piece of code that draws the component to a &lt;em>viewport&lt;/em>. All drawers use the methods provide in the &lt;code>RenderContext&lt;/code> class to draw to the &lt;em>viewport&lt;/em>. In this sample the viewport is located at coords (10,10) and have a bounds of 30 cols and one row.&lt;/li>
&lt;li>Then we use the &lt;code>AddViewport&lt;/code> method to add a &lt;em>viewport&lt;/em> to the component. A &lt;em>viewport&lt;/em> is a region (position, bounds and layer) in the console window. A component can only draw in its own &lt;em>viewport&lt;/em>.&lt;/li>
&lt;li>Finally we add the component to the &lt;em>component tree&lt;/em> using the &lt;code>Add&lt;/code> method of the &lt;code>UI&lt;/code> property of the engine. The component is now added to the tree and TVision2 will begin drawing it.&lt;/li>
&lt;/ol>
&lt;p>Congratulations! You have finished your first TVision2 app! Now, we&amp;rsquo;ll do some changes to it to see some of the TVision2 characteristics :)&lt;/p>
&lt;h2 id="updating-a-component">Updating a component&lt;/h2>
&lt;p>If you put a breakpoint in the &lt;code>ctx.Drawstring&lt;/code> line you&amp;rsquo;ll see that &lt;strong>the breakpoint is only hit once&lt;/strong>. This is because once a component is drawn, it won&amp;rsquo;t be drawn again &lt;strong>until it changes&lt;/strong>. This raises the question on how TVision2 knows if a component &amp;ldquo;has changed&amp;rdquo; and need to be redrawn. Well, a component needs to be redrawn if &lt;strong>its state has changed&lt;/strong>. The &amp;ldquo;state&amp;rdquo; of a component is the additional object it holds (in our example is a string, because we are using a &lt;code>TvComponent&amp;lt;string&amp;gt;&lt;/code> object). For changing a state of a component there is a &lt;code>SetState&lt;/code> method. However &lt;strong>this won&amp;rsquo;t work&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddDrawer&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DrawStringAt&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Zero&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvColorPair&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Blue&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Yellow&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">SetState&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Hello world! &amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">+&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Random&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">Next&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1000&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;span style="color:#000;font-weight:bold">});&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This is &lt;strong>a very bad practice&lt;/strong>. You should never access to the component from inside the &lt;code>AddDrawer&lt;/code> method (in this case you have access to it because this is a sample code, but in more complex applications, usually the drawer do not have access to the reference that holds the component). Anyway, this does not work because &lt;strong>TVision2 assumes that drawing the component NEVER change its state&lt;/strong>. TVision2 has an specific way to change the state of a component, which is &lt;strong>using a behavior&lt;/strong>. We will use the &lt;code>AddStateBehavior&lt;/code> method to add a behavior to a component:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddStateBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">s&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hello world &amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">+&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Random&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">Next&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1000&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">+&lt;/span> &lt;span style="color:#4e9a06">&amp;#34; &amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you run the application again you will see how the content of the label is changing continuously.&lt;/p>
&lt;blockquote>
&lt;p>Note that we don&amp;rsquo;t call the &lt;code>SetState&lt;/code> method of the &lt;code>TvComponent&lt;/code>. The &lt;code>SetState&lt;/code> method is rarely used, but it is provided to some advanced scenarios. The standard way to update a component is using a behavior.&lt;/p>
&lt;/blockquote>
&lt;p>A component &lt;strong>can have zero or more behaviors&lt;/strong> and there are many ways to add a behavior to a component. We have used the &lt;code>AddStateBehavior(Func&amp;lt;T,T&amp;gt;)&lt;/code> method which is the simplest one, but there are other ways. We will discuss all of them in the behaviors section.&lt;/p>
&lt;blockquote>
&lt;p>Remember: To change the state of a component &lt;strong>try to use always a behavior&lt;/strong>. Use &lt;code>SetState&lt;/code> method, only when you need to change the state of another component.&lt;/p>
&lt;/blockquote>
&lt;h2 id="adding-more-than-one-viewport">Adding more than one viewport&lt;/h2>
&lt;p>A component can have more than one viewport:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddViewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Viewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">FromXY&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddViewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Viewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">FromXY&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">11&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddViewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Viewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">FromXY&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">20&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you run the code, you will see &lt;strong>three labels&lt;/strong> all with the same content and changing at the same time.&lt;/p></description></item><item><title>Docs: Console drivers</title><link>/docs/intro/console-drivers/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/intro/console-drivers/</guid><description>
&lt;p>The &lt;em>console driver&lt;/em> is the responsible to flush the real characters to the underlying console and to read the events from the terminal. As an application developer you never interact directly with the &lt;em>console driver&lt;/em> (it is user under the hoods by TVision2), but you still has to select what &lt;em>console driver&lt;/em> to use for your application.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>DotNetConsoleDriver&lt;/code>: This driver uses standard netcore classes (mostly &lt;code>System.Console&lt;/code>) to interact with the real terminal. Its strongest point is that it supports all operating systems where netcore is supported. Its weakness is only supports 16 colors and have no mouse support.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>NcursesConsoleDriver&lt;/code>: This driver uses the &lt;a href="https://en.wikipedia.org/wiki/Ncurses">NCurses&lt;/a> library to adapt to the available terminal. Currently only works in Linux and supports from B/W to 256 colors.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>Win32StdConsoleDriver&lt;/code>: This driver uses the &lt;a href="https://docs.microsoft.com/en-us/windows/console/console-functions">Win32 Console API&lt;/a> to interact with the console. It supports any version of Windows but only up to 16 colors and has mouse support.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>Win32AnsiSeqConsoleDriver&lt;/code>: This driver uses the new &lt;em>virtual terminal&lt;/em> API that is available in Windows 10. It supports true color and mouse support, but only in Windows 10+.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>AnsiLinuxConsoleDriver&lt;/code>: This driver uses standard ANSI escape sequences for Linux that should work on most of the modern terminals (like xterm).&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="choosing-one-console-driver">Choosing one console driver&lt;/h2>
&lt;p>The &lt;strong>best option&lt;/strong> is let TVision2 to choose the best console driver at runtime. This will ensure that a valid console driver is chosen for the OS that is running your app. You can use the &lt;code>UsePlatformConsoleDriver&lt;/code> of &lt;code>Tvision2Setup&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">builder&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseTvision2&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">setup&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">setup&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseDotNetConsoleDriver&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>By default this method will defer to &lt;code>NcursesConsoleDriver&lt;/code> in Linux and &lt;code>Win32StdConsoleDriver&lt;/code> in Windows.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>And MacOS?&lt;/strong> Currently &lt;strong>MacOS is not officially supported. However is in the roadmap&lt;/strong>.&lt;/p>
&lt;/blockquote>
&lt;p>You can change this behavior by passing an options delegate to the &lt;code>UseDotNetConsoleDriver&lt;/code> to apply some conditional configuration (in run-time):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">setup&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UsePlatformConsoleDriver&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">opt&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000">opt&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Configure&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Linux specific config
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">OnLinux&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">lo&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// We want to setup our palette
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000">lo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseAnsi&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">UsePalette&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">p&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Will init the palette using our terminal name (currently only xterm-256color is supported)
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000">p&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">LoadFromTerminalName&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">/* We want to be able to use RGB colors
&lt;/span>&lt;span style="color:#8f5902;font-style:italic"> but if we are in palette mode (no full direct color)
&lt;/span>&lt;span style="color:#8f5902;font-style:italic"> we need to setup a translator that translates any RGB
&lt;/span>&lt;span style="color:#8f5902;font-style:italic"> color in a palette color. */&lt;/span>
&lt;span style="color:#000">p&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">TranslateRgbColorsWith&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">InterpolationPaletteTranslator&lt;/span>&lt;span style="color:#000;font-weight:bold">());&lt;/span>
&lt;span style="color:#000;font-weight:bold">});&lt;/span>
&lt;span style="color:#000;font-weight:bold">})&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Windows specific config
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">OnWindows&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">w&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// We want to use the new ANSI sequences available on Win10
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000">w&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseAnsi&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>
&lt;span style="color:#000;font-weight:bold">})&lt;/span>
&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Colors</title><link>/docs/intro/working-with-colors/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/intro/working-with-colors/</guid><description>
&lt;p>Dealing with colors is complex, because there are important differences between *NIX and Windows.&lt;/p>
&lt;h2 id="color-modes">Color Modes&lt;/h2>
&lt;p>Your application can run in one of this four colour modes:&lt;/p>
&lt;ul>
&lt;li>&lt;code>NoColor&lt;/code>: No color support. Only B/W&lt;/li>
&lt;li>&lt;code>Basic&lt;/code>: Basic color support (8/16 colors)&lt;/li>
&lt;li>&lt;code>Palettized&lt;/code>: Palettized support. TVision2 supports palettes up to 256 colors.&lt;/li>
&lt;li>&lt;code>Direct&lt;/code>: Direct RGB colors (aka true color)&lt;/li>
&lt;/ul>
&lt;p>The API for colors is built upon the &lt;code>TvColor&lt;/code> type. The &lt;code>TvColor&lt;/code> abstracts three APIs in one:&lt;/p>
&lt;ol>
&lt;li>The RGB API, used when working in direct (full color) mode&lt;/li>
&lt;li>The palette API, used when working in palettized modes (like 256 colors)&lt;/li>
&lt;li>The index API, used when working in fixed-color modes (like 16 colors)&lt;/li>
&lt;/ol>
&lt;p>The &lt;strong>final color mode depends on the operating system, the terminal and your configuration&lt;/strong>:&lt;/p>
&lt;p>If application is running in Windows 7 your application will always be in Basic mode. There is no way, currently, to override this configuration (althought it is in the roadmap, because this would allow run Windows applications in 256 modes through ConEmu or similar). If application is running in Windows 10 you can choose between run Basic, Palettized or Direct color modes.&lt;/p>
&lt;p>In Linux, if the application uses the NCurses console driver (to support old terminals) the color mode can be NoColor, Basic or Palettized. No Direct support is provided through NCurses. To support Direct color mode, you have to use the Ansi console driver (and in this case your application can run in Direct, Palettized or Basic based on your configuration).&lt;/p>
&lt;h2 id="enabling-true-color">Enabling True Color&lt;/h2>
&lt;p>If your OS is capable to use true color (Linux or Windows 10) you can enable true color in your application. This allows the use RGB colors (created using &lt;code>TvColor.FromRGB&lt;/code>). An RGB color is created by using 3 bytes (one for red, one for green, one for blue).&lt;/p>
&lt;blockquote>
&lt;p>To enable true color in Linux you must use the Ansi console driver, there is &lt;strong>no support for true color when using NCurses&lt;/strong>:&lt;/p>
&lt;/blockquote>
&lt;p>Use following code to enable true color in your application:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">setup&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UsePlatformConsoleDriver&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">opt&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">opt&lt;/span>
&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Configure&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">OnLinux&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">l&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">l&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseAnsi&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">EnableTrueColor&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">tc&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">tc&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithBuiltInSequences&lt;/span>&lt;span style="color:#000;font-weight:bold">())&lt;/span>
&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">OnWindows&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">w&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">w&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UseAnsi&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">EnableTrueColor&lt;/span>&lt;span style="color:#000;font-weight:bold">())&lt;/span>
&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>In Linux your application can run under a terminal with NO true color support. If you enable true color and use RGB colors when running in a terminal with no true color support, your application will output garbage. Currently TVision2 do not perform any check to ensure that terminal supports true color (and note that there is no any standarized way to do it). We will implement some checks in the future (like reading &lt;code>COLORTERM&lt;/code> environment variable).&lt;/p>
&lt;/blockquote>
&lt;p>If you are in RGB color mode, can create a &lt;code>TvColor&lt;/code> by calling &lt;code>TvColor.FromRGB&lt;/code> method. If you are in palettized mode, you can use &lt;code>TvColor.FromPaletteIndex&lt;/code> and if you are in fixed-color mode you can use &lt;code>TvColor.FromRaw&lt;/code>. Let&amp;rsquo;s discuss all these methods a little further.&lt;/p>
&lt;h2 id="using-palettized-color-mode-up-to-256-colors">Using palettized color mode (up to 256 colors)&lt;/h2>
&lt;p>Most terminals support a 256 colors palette (in Linux this is probably the most common color mode. Most known terminals like &lt;code>xterm-256&lt;/code> work this way). In this mode a color is just an index (from 0 to 255). Usually the first 16 colors are the same that the basic color mode and the colors range from 232-255 are different levels of grey. However every terminal can have its own palette and most terminal emulators let the user define its own palette. To create a palette color use the &lt;code>TvColor.FromPaletteIndex&lt;/code> method.&lt;/p>
&lt;p>TVision2 offers several capabilities when working with palettes. TVision2 creates a palette object (&lt;code>IPalette&lt;/code> instance) to help you dealing with the palettes. A palette contains &lt;strong>a set of colors, with an index, a name and also its RGB components&lt;/strong>. At startup your application can choose how to fill the palette:&lt;/p>
&lt;ol>
&lt;li>Reading the current palette of the terminal&lt;/li>
&lt;li>Reading a definition file&lt;/li>
&lt;/ol>
&lt;p>If you read a palette from a definition file, the palette of your application won&amp;rsquo;t be (probably) the same palette used by the terminal. Note that &lt;strong>always the palette of the terminal is the one that is used&lt;/strong> (that makes sense, as is the terminal the one who renders the application). If your application has one palette and the terminal has another palette, your application can draw something using the color 120 thinking that is a &amp;ldquo;pink&amp;rdquo;, and the final color rendered in screen will be the color 120 of the terminal palette (which can be any other color). However &lt;strong>you can change the palette of the terminal to fit the palette of your application&lt;/strong>. Note that, in Linux, not all terminals support redefining its palette.&lt;/p>
&lt;p>A palette has another possibility: as it contains the RGB components of each color, it is possible &lt;strong>to translate an RGB color to a palettized color&lt;/strong>, that is, finding the color in the palette that is more similar to the RGB color passed. This allows to use RGB colors even though in terminals that do not support true color, but the final colors can be slightly different (as the color used is always one palette color). TVision2 allows you to configure how to convert from RGB colors to palette colors.&lt;/p>
&lt;blockquote>
&lt;p>Technically it is possible to use the palette to transform from a palette color to a RGB one, but this is not useful, because all terminals that support true color, support palette too. So, &lt;strong>you can use a palette color in a true color application&lt;/strong>. If a palettized color is used when the application is configured in true color mode, it will work as expected.&lt;/p>
&lt;/blockquote>
&lt;h3 id="using-ansi-colors-in-palettized-mode">Using ANSI colors in palettized mode&lt;/h3>
&lt;p>In palettized mode, a color is simply an integer with the index of the color in the palette. So, &lt;strong>based on your palette&lt;/strong> the color index 120 can be red, lime or turquoise. Fortunately &lt;strong>most palettes have the same first 16 values like the Ansi 4 bits colors&lt;/strong>. If this is the case, you can use a &lt;code>TvColor&lt;/code> like &lt;code>TvColor.Red&lt;/code> in a palettized application and the result color will be Red. If the first colors of the palette are not like the ANSI standard, you can sill use &lt;code>TvColor.Red&lt;/code> but there is no guarantee that the real color will be red!&lt;/p>
&lt;p>In a palettized color mode, the palette can be &amp;ldquo;fixed&amp;rdquo; or &amp;ldquo;configurable&amp;rdquo;. In a &amp;ldquo;configurable&amp;rdquo; palette you can choose the colors you want to use from a boarder range of colors (like choosing 256 colors from a range of millions). In a &amp;ldquo;fixed&amp;rdquo; palette, the palette is, well, fixed by the terminal, and can&amp;rsquo;t be changed. When working in a palettized mode the main question is &amp;ldquo;how I can know what color is the color index 120?&amp;rdquo;.&lt;/p>
&lt;h3 id="the-palette-object">The Palette object&lt;/h3>
&lt;p>TVision2 offers the &lt;code>IPalette&lt;/code> interface for this question. And &lt;strong>to simplify your application development, TVision2 will ALWAYS offer you a palette, even though your application is running in a fixed color mode or in RGB mode&lt;/strong>. With the palette you can:&lt;/p>
&lt;ul>
&lt;li>Get a &lt;code>TvColor&lt;/code> from a palette index.&lt;/li>
&lt;li>Get all entries of the palette (their index, and the &lt;code>TvColor&lt;/code> associated with its RGB values).&lt;/li>
&lt;li>Add a new color to the palette. This can only be done if the palette is not fixed (its &lt;code>IsFreezed&lt;/code> property is &lt;code>false&lt;/code>).&lt;/li>
&lt;li>Change a color of the palette (i. e. previously index 120 was dark brown, now is light orange). This can only be done if the palette is not fixed (its &lt;code>IsFreezed&lt;/code> property is &lt;code>false&lt;/code>)&lt;/li>
&lt;li>Get the color mode of the application&lt;/li>
&lt;/ul>
&lt;p>Also, it is possible to configure color converters: a color converter converts a RGB color (created with &lt;code>TvColor.FromRGB&lt;/code>) to a palettized color of the current palette. If configured it allows use RGB colors in a palettized color mode. However final color is just an approximation and there is a penalty hit.&lt;/p>
&lt;blockquote>
&lt;p>Note that when you are in &lt;code>Direct&lt;/code> color mode, you are not using a palette at all. However TVision2 provides you with a palette object, holding the current terminal palette, so you can retrieve colors from this palette and display them in the exact same way yo would do it using the &lt;code>Palettized&lt;/code> color mode.&lt;/p>
&lt;/blockquote>
&lt;h2 id="fixed-color-mode">Fixed color mode&lt;/h2>
&lt;p>Your application will run in fixed color mode in Windows if not using the new &lt;em>virtual terminal&lt;/em>. Only Windows 10 can use the &lt;em>virtual terminal&lt;/em>, so if in Windows 7 your application will be in fixed color mode always. The fixed color mode of Windows is the &amp;ldquo;4 bits ANSI&amp;rdquo; (16 colors). In Linux your application will run in the fixed color mode, based on the terminal of the host.&lt;/p>
&lt;p>There are two main fixed color modes:&lt;/p>
&lt;ul>
&lt;li>Ansi 4 bits (16 colors)&lt;/li>
&lt;li>Ansi 3 bits (8 colors)&lt;/li>
&lt;/ul>
&lt;p>In this color modes, the value of a color is a ANSI standard value. For example, the red is always 4, so you can create the color red by using &lt;code>TvColor.FromRaw(4)&lt;/code>. However as the colors are fixed, TVision2 offers you a set of predefined &lt;code>TvColor&lt;/code> values, so you can use &lt;code>TvColor.Red&lt;/code> instead. There is also a utility class (&lt;code>TvColorNames&lt;/code>) that gives some methods for converting between color names and its integer value in the ANSI standard.&lt;/p>
&lt;p>You can notice that there are only 8 predefined colors in &lt;code>TvColor&lt;/code> (and &lt;code>TvColorNames&lt;/code>): the 8 colors defined in ANSI 3 bits per color. What happens if using ANSI 4 bits (like Windows)? In this mode, the extra 8 colors are the brighten value of the 8 standard ones (i. e. you have red that is 4 and bright red wich is 12). However, you &lt;strong>should not create a bright red color&lt;/strong>. Instead you should use the standard red with the bright attributte applied on it. We will see attributes later when discussing how to do character output.&lt;/p>
&lt;h2 id="direct-color-mode">Direct color mode&lt;/h2>
&lt;p>This is the easiest color mode to deal with, and it is available in Windows 10 and in Linux (using the Ansi console driver). In this color mode, you create the colors by using &lt;code>TvColor.FromRGB&lt;/code>. Although there is no really a palette, TVision2 offers you a palette, that you can setup and fill when starting the app. With this palette you can still use the &lt;code>TvColor.FromPaletteIndex&lt;/code> for the palettized colors. Of course, you can choose to &lt;strong>not load&lt;/strong> a palette, and in this case the palette provided to you will contain only the ANSI colors (so, yes: &lt;code>TvColor.Red&lt;/code> works in direct color mode, and it is still red).&lt;/p>
&lt;p>To enable this color mode you must call &lt;code>EnableTrueColor()&lt;/code> when configuring the terminal. Otherwise TVision2 will default to palettized color mode.&lt;/p></description></item><item><title>Docs: Components</title><link>/docs/intro/components/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/intro/components/</guid><description>
&lt;p>Let&amp;rsquo;s see how we can create a simple component for using in our application. To create a component, you must create a &lt;code>TvComponent&amp;lt;T&amp;gt;&lt;/code> class object. Every component handles a single piece of data (its state) of type &lt;code>T&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">label&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvComponent&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Hello world&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;mylabel&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This code creates a component that holds a simple &lt;code>string&lt;/code> value as state. The component is initialized to have state of &lt;code>Hello World&lt;/code> and a name of &lt;code>myLabel&lt;/code>.&lt;/p>
&lt;p>Once you have a component you can add to your application using the &lt;code>UI&lt;/code> property of the &lt;code>ITuiEngine&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">engine&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">UI&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Add&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">label&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>At this point the component is attached and running! However you won&amp;rsquo;t see anything at screen. To see something in the screen we need to specify &lt;strong>where&lt;/strong> and &lt;strong>how&lt;/strong> the component has to be drawn. For the &lt;em>where&lt;/em> we use a &lt;em>viewport&lt;/em> and for the &lt;em>how&lt;/em>, we need a &lt;em>drawer&lt;/em>.&lt;/p>
&lt;h2 id="viewports">Viewports&lt;/h2>
&lt;p>A viewport is a instance of a class that implements the &lt;code>IViewport&lt;/code> interface and it is, basically, a position and a bounds. The most common way to create viewports is to use the &lt;code>Viewport&lt;/code> class:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">viewport&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Viewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">FromXY&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This creates a viewport that starts at position &lt;code>(10, 10)&lt;/code> and has 30 columns and a single row. For multiline viewports there is another constructor that accepts a &lt;code>TvBounds&lt;/code> object. This constructor also accepts a &lt;code>Layer&lt;/code> object with the layer of the viewport (its z-index):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">viewport&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Viewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">FromXY&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#000">TvBounds&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">FromRowsAndCols&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#000">Layer&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Standard&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Once you have a viewport you can add it to the component using the &lt;code>AddViewport&lt;/code> method. This method returns the viewport identifier (a &lt;code>Guid&lt;/code>). The first viewport has always the &lt;code>Guid.Zero&lt;/code> value and it is considered the &lt;em>default&lt;/em> viewport. You need this &lt;code>Guid&lt;/code> to update a specific viewport.&lt;/p>
&lt;p>Note that a component can have more than one viewport. In this case it will be rendered in &lt;em>all&lt;/em> of its viewports.&lt;/p>
&lt;h2 id="drawers">Drawers&lt;/h2>
&lt;p>A drawer is responsible to draw the component, or a part of it. A component can have zero or more drawers attached to it, and all of them are executed to compose the final output of the component.&lt;/p>
&lt;p>The method &lt;code>AddDrawer&lt;/code> allows adding a drawer to the component.&lt;/p></description></item><item><title>Docs: Drawers</title><link>/docs/intro/drawers/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/intro/drawers/</guid><description>
&lt;p>A drawer is responsible to draw a component. Every component that has to be shown needs to have at least one &lt;em>drawer&lt;/em> attached to it.&lt;/p>
&lt;p>The simplest way to add a drawer is use the &lt;code>AddDrawer&lt;/code> overload that accepts a delegate:&lt;/p>
&lt;pre>&lt;code>myComponent.AddDrawer(ctx =&amp;gt;
{
ctx.DrawStringAt(ctx.State.Value, TvPoint.Zero, new TvColorPair(TvColor.Red, TvColor.White));
});
&lt;/code>&lt;/pre>&lt;p>This delegate accepts a parameter of &lt;code>RenderContext&amp;lt;T&amp;gt;&lt;/code> (where &lt;code>T&lt;/code> is the type of component&amp;rsquo;s state). You can use the methods of the &lt;code>RenderContext&amp;lt;T&amp;gt;&lt;/code> to effectively draw the component.&lt;/p>
&lt;h2 id="the-itvdrawert-interface">The ITvDrawer&lt;T> interface&lt;/h2>
&lt;p>The other way to add a drawer to a component is to use the &lt;code>AddDrawer&lt;/code> method with an instance of an object that implements &lt;code>ITvDrawer&amp;lt;T&amp;gt;&lt;/code> interface. This interface has a single method:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">void&lt;/span> &lt;span style="color:#000">Draw&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">RenderContext&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">T&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;code>Draw&lt;/code> method use the &lt;code>RenderContect&amp;lt;T&amp;gt;&lt;/code> to effectively draw the component.&lt;/p>
&lt;h2 id="the-render-context">The Render Context&lt;/h2>
&lt;p>Your code &lt;strong>never draw directly on the console, nor on the viewport&lt;/strong>. You have to use always the &lt;code>RenderContext&amp;lt;T&amp;gt;&lt;/code> object to render your component. The &lt;code>RenderContext&amp;lt;T&amp;gt;&lt;/code> class offers following methods and properties:&lt;/p>
&lt;ul>
&lt;li>&lt;code>State&lt;/code> (of type &lt;code>T&lt;/code>): State of the component&lt;/li>
&lt;li>&lt;code>DrawStringAt()&lt;/code>: Allows drawing a string in the desired location with desired colors&lt;/li>
&lt;li>&lt;code>DrawChars()&lt;/code>: Draws a single character a number of specified times in the desired location with desired colors&lt;/li>
&lt;li>&lt;code>Clear()&lt;/code>: Clears the viewport&lt;/li>
&lt;li>&lt;code>Fill()&lt;/code>: Fills the viewport with spaces of specified color&lt;/li>
&lt;/ul>
&lt;p>For example, you can use &lt;code>DrawStringAt()&lt;/code> to draw one string starting in the top-left of the viewport with red letters over a white foreground:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DrawStringAt&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Value&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Zero&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvColorPair&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Red&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">White&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Note that the position you use (&lt;code>TvPoint.Zero&lt;/code> in this example) is always relative to the viewport. &lt;strong>You always draw inside a viewport&lt;/strong>, and you can&amp;rsquo;t draw outside it.&lt;/p>
&lt;h2 id="adaptative-drawing">Adaptative drawing&lt;/h2>
&lt;p>It is possible to add drawers that are only applied if the viewport matches some specific filter. We call this &amp;ldquo;adaptative drawing&amp;rdquo;. To enable adaptative drawing you must use the &lt;code>IfViewport&lt;/code> method of the &lt;code>TvComponent&amp;lt;T&amp;gt;&lt;/code> class, and then chain calls to &lt;code>AddDrawer&lt;/code>. All drawers added after one &lt;code>IfViewport&lt;/code> call will be only invoked if the viewport matches the condition specified in the &lt;code>IfViewport&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">helloWorld&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvComponent&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">int&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;label&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddDrawer&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DrawStringAt&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">$&amp;#34;Current value: {ctx.State}&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">PadRight&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Viewport&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Bounds&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Cols&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Zero&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvColorPair&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Blue&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Yellow&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;span style="color:#000;font-weight:bold">});&lt;/span>
&lt;span style="color:#000">helloWorld&lt;/span>
&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">IfViewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">v&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">v&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Bounds&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Cols&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddDrawer&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DrawStringAt&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;*&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Zero&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvColorPair&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Red&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Green&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;span style="color:#000;font-weight:bold">});&lt;/span>
&lt;span style="color:#000">helloWorld&lt;/span>
&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">IfViewport&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">v&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">v&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Bounds&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Cols&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;gt;=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#000">v&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Bounds&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Cols&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">5&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddDrawer&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DrawStringAt&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">ToString&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">PadRight&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Viewport&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Bounds&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Cols&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#000">TvPoint&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Zero&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">TvColorPair&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Blue&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TvColor&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Yellow&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;span style="color:#000;font-weight:bold">});&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In this code we add three drawers to the component. Two of them are adaptative drawers (added after a &lt;code>IfViewport&lt;/code> call). The other one is a standard drawer.&lt;/p>
&lt;p>Then based on the viewport drawn, one of the three drawers will be selected.&lt;/p>
&lt;blockquote>
&lt;p>First the adaptative drawers are checked. If the viewport can&amp;rsquo;t be drawn by any of the adaptative drawers then the standard drawers are used.&lt;/p>
&lt;/blockquote>
&lt;p>The conditions to all &lt;code>IfViewport&lt;/code> do not need to be mutually exclusive. If one viewport matches more than one condition all adaptative drawers selected by all matched conditions will be called to draw the component.&lt;/p></description></item><item><title>Docs: Behaviors</title><link>/docs/intro/behaviors/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/intro/behaviors/</guid><description>
&lt;p>The &lt;em>behaviors&lt;/em> contains the &lt;strong>logic&lt;/strong> of the component. A single component can have more than one behavior. All behaviors share the state of the component. There are different ways to add a behavior to a component to cover different needs. Let&amp;rsquo;s start with the simplest one&amp;hellip;&lt;/p>
&lt;h2 id="addstatebehavior-new-state-behavior">AddStateBehavior (new state behavior)&lt;/h2>
&lt;p>The &lt;code>AddStateBehavior&lt;/code> method is, probably, the simplest way to add one behavior to one component. The parameter is a delegate &lt;code>Func&amp;lt;T,T&amp;gt;&lt;/code> where &lt;code>T&lt;/code> is the type of the component&amp;rsquo;s state. The delegate receives the current state and have to return &lt;strong>a new state&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">helloWorld&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddStateBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">s&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hello world &amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">+&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Random&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">Next&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1000&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">+&lt;/span> &lt;span style="color:#4e9a06">&amp;#34; &amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This method creates a behavior that &lt;strong>updates the full state&lt;/strong> of the component. At each iteration the delegate is called and the state of the component is &lt;strong>replaced&lt;/strong> with the state returned by the delegate. Most times this will force the component to redraw itself.&lt;/p>
&lt;h2 id="addbehavior-with-single-delegate">AddBehavior with single delegate&lt;/h2>
&lt;p>There are various overloads of the &lt;code>AddBehavior&lt;/code> method. The simplest one is the one that uses a single delegate &lt;code>Func&amp;lt;T, bool&amp;gt;&lt;/code> as a parameter (again &lt;code>T&lt;/code> is the type of the component&amp;rsquo;s state). The delegate receives the current state of the component and can do whatever it needs with it. The delegate must return &lt;code>true&lt;/code> if the component needs to redraw (usually, if the state gets updated). Note that this method do not work with immutable states, because do not replace the whole component state (only updates it).&lt;/p>
&lt;h2 id="itvbehaviort-interface">ITvBehavior&lt;T> interface&lt;/h2>
&lt;p>Another option to add a behavior to a component is create a class that implements the &lt;code>ITvBehavior&amp;lt;T&amp;gt;&lt;/code> (&lt;code>T&lt;/code> is the type of the component&amp;rsquo;s state). This interface has a single method:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">bool&lt;/span> &lt;span style="color:#000">Update&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">BehaviorContext&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">T&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">updateContext&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The method &lt;code>Update&lt;/code> is where the behavior do its logic. The parameter &lt;code>updateContext&lt;/code> give access to the current component&amp;rsquo;s state and contains some other useful data. The method must return &lt;code>true&lt;/code> if the component needs to be redrawn. The &lt;code>BehaviorContext&amp;lt;T&amp;gt;&lt;/code> class do not contains any method to allow replacing the whole state of the component, so this approach do not work with immutable states.&lt;/p>
&lt;p>Once you have one instance of any class implementing &lt;code>ITvBehavior&amp;lt;T&amp;gt;&lt;/code> you can use the following overload of &lt;code>AddBehavior&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">public&lt;/span> &lt;span style="color:#204a87;font-weight:bold">void&lt;/span> &lt;span style="color:#000">AddBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">TB&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">TB&lt;/span> &lt;span style="color:#000">behavior&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">Action&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">BehaviorMetadata&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">T&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">TB&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#000">metadataAction&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">null&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">where&lt;/span> &lt;span style="color:#000">TB&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">ITvBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">T&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This method is the preferred way to add more complex behaviors as it gives access to the full &lt;code>BehaviorContext&amp;lt;T&amp;gt;&lt;/code> object and not only the state.&lt;/p>
&lt;h2 id="the-behaviormetadata">The BehaviorMetadata&lt;/h2>
&lt;p>As you can see the second parameter of the previous &lt;code>AddBehavior&lt;/code> is an &lt;code>Action&amp;lt;BehaviorMetadata&amp;lt;T, TB&amp;gt;&amp;gt;&lt;/code> that allows to (optionally) configure the metadata of this behavior. The metadata is used by TVision2 and allows setting behavior options in a independent way. The class &lt;code>BehaviorMetadata&amp;lt;T,TB&amp;gt;&lt;/code> provides following methods:&lt;/p>
&lt;ul>
&lt;li>&lt;code>UseScheduler(BehaviorSchedule schedule)&lt;/code>: This methods sets when the behavior is invoked. The default value is &lt;code>BehaviorSchedule.OncePerFrame&lt;/code> which means the behavior will be invoked at each cycle. The other option is &lt;code>BehaviorSchedule.OnEvents&lt;/code> which means that the behavior will only be invoked if there is any event pending to be processed. If your behavior relies on some events (like keystrokes) use &lt;code>OnEvents&lt;/code> to maximize the performance.&lt;/li>
&lt;li>&lt;code>AddDependency&amp;lt;TR&amp;gt;(Expression&amp;lt;Func&amp;lt;TB, TR&amp;gt;&amp;gt; propertyExp, string name)&lt;/code>: This method allows adding a dependency property to &lt;strong>another component&lt;/strong>. Using dependencies, a behavior object can obtanin references to other components (existing or future) automatically.&lt;/li>
&lt;/ul>
&lt;h2 id="the-behavior-context">The Behavior Context&lt;/h2>
&lt;p>When using a custom behavior object that implements the &lt;code>ITvBehavior&amp;lt;T&amp;gt;&lt;/code> interface, the &lt;code>Update&lt;/code> method receives a parameter of type &lt;code>BehaviorContext&amp;lt;T&amp;gt;&lt;/code>. This object contains following readonly properties:&lt;/p>
&lt;ul>
&lt;li>&lt;code>State&lt;/code>: Current state of the component (type &lt;code>T&lt;/code>)&lt;/li>
&lt;li>&lt;code>ITvConsoleEvents Events&lt;/code>: A collection of all pending events. Can be empty if there are no events left to process (type &lt;code>ITvConsoleEvents&lt;/code>)&lt;/li>
&lt;li>&lt;code>ComponentLocator&lt;/code>: A helper object that finds other components. The locator can find the parent component of the current component, the root component or any other component by name (type &lt;code>ComponentLocator&lt;/code>).&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>Note&lt;/strong>: Avoid the use &lt;code>ComponentLocator.GetByName()&lt;/code> method, as this performs a search by name every time, which can incur in performance hit. If your behavior has a dependency on other component, better use a &lt;code>behavior dependency&lt;/code>. The method &lt;code>GetByName&lt;/code> should be used only in cases when you don&amp;rsquo;t want to hold a reference to another component for any reason.&lt;/p>
&lt;/blockquote>
&lt;h2 id="behavior-dependencies">Behavior dependencies&lt;/h2>
&lt;p>A behavior can have a dependency to another &lt;code>TvComponent&lt;/code>. These dependencies are properties of the class that implements the &lt;code>ITvBehavior&amp;lt;T&amp;gt;&lt;/code> and are set automatically by TVision2. There are two ways to set a component dependency:&lt;/p>
&lt;ul>
&lt;li>By using the &lt;code>TvComponentDependencyAttribute&lt;/code> on the property of the behavior class&lt;/li>
&lt;li>By calling the &lt;code>AddDependency&lt;/code> method of the &lt;code>BehaviorMetadata&lt;/code>.&lt;/li>
&lt;/ul>
&lt;p>Both methods are equivalent, so use what fits better to you.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">DemoBehavior&lt;/span> &lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">ITvBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">FooState&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#c4a000"> [TvComponentDependency(Name =&amp;#34;label&amp;#34;)]&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">public&lt;/span> &lt;span style="color:#000">TvComponent&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">Label&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">get&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">set&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">public&lt;/span> &lt;span style="color:#204a87;font-weight:bold">bool&lt;/span> &lt;span style="color:#000">Update&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">BehaviorContext&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">FooState&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">updateContext&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{...}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>or&lt;/strong> do not use &lt;code>[TvComponentDependency]&lt;/code> and use &lt;code>AddDependency&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">myCmp&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">DemoBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">(),&lt;/span> &lt;span style="color:#000">m&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">m&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AddDependency&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">u&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">u&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Label&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;label&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="behavior-factories">Behavior factories&lt;/h2>
&lt;p>In most cases you create the behavior object and use &lt;code>AddBehavior&lt;/code> to attach the object to the component. However sometimes your behavior can depend on some objects that are in the dependency injection system provided by net core. In these cases you can leverage the creation of the behavior to TVision2 itself. TVision2 will create a behavior by using a &lt;code>IServiceProvider&lt;/code> allowing to inject dependencies in the constructor of the behavior class.&lt;/p>
&lt;p>To create a behavior through a factory you have to use following &lt;code>AddBehavior&lt;/code> overload:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#000">AddBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">TB&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">Action&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">FactoryBehaviorMetadata&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">TB&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">T&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#000">metadataAction&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">null&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">where&lt;/span> &lt;span style="color:#000">TB&lt;/span> &lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">ITvBehavior&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">T&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;code>FactoryBehaviorMetadata&amp;lt;TB,T&amp;gt;&lt;/code> exposes the &lt;code>UseScheduler&lt;/code> and &lt;code>AddDependency&lt;/code> methods seen before and following new methods:&lt;/p>
&lt;ul>
&lt;li>&lt;code>OnCreate(Action&amp;lt;TB&amp;gt; afterCreate)&lt;/code>: This method allows you to pass a delegate that will be called against the new created behavior. This allows initializing the behavior in any needed way once it is created.&lt;/li>
&lt;li>&lt;code>CreateUsing(Func&amp;lt;IServiceProvider, TB&amp;gt; creator)&lt;/code>: This methods set the delegate to use for create the behavior. The delegate receives a &lt;code>IServiceProvider&lt;/code> that you can use to inject the required dependencies in the behavior constructor.&lt;/li>
&lt;/ul>
&lt;p>Note that calling &lt;code>CreateUsing&lt;/code> is optional. If you don&amp;rsquo;t provide a way to create the behavior a standard mechanism is used. This standard mechanism has the following limitations:&lt;/p>
&lt;ol>
&lt;li>Behavior class can have only one single constructor&lt;/li>
&lt;li>All parameters of the constructor must be services registered in the &lt;code>IServiceProvider&lt;/code>&lt;/li>
&lt;/ol></description></item><item><title>Docs: Keyboard Input</title><link>/docs/intro/keyboard-input/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/intro/keyboard-input/</guid><description>
&lt;p>Keyboard input has some &amp;ldquo;limitations&amp;rdquo; due mainly on how Linux handle the keyboards on terminal:&lt;/p>
&lt;ul>
&lt;li>No &lt;em>key up&lt;/em> event. Only the &lt;em>key down&lt;/em> event is available. This is because in Linux terminal there is no keyboard concept: only characters coming to your application.&lt;/li>
&lt;li>Some different key combinations generate the same output character, making impossible for TVision2 to detect keystrokes like &lt;code>Ctrl+I&lt;/code> (because generates the &lt;code>TAB&lt;/code> character) or &lt;code>Ctrl+M&lt;/code> because generates the &lt;code>CR&lt;/code> generated also by the &lt;code>ENTER&lt;/code> key.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Currently if running under Windows, these combinations (like &lt;code>Ctrl+I&lt;/code>) are properly handled. This can lead to a different behavior of the application when running under Linux or under Windows, and it will be addressed on a future release.&lt;/p>
&lt;/blockquote>
&lt;h2 id="processing-keyboard-events">Processing Keyboard events&lt;/h2>
&lt;p>You need a behavior to process a keyboard event. In the &lt;code>Update&lt;/code> method the &lt;code>BehaviorContext&amp;lt;T&amp;gt;&lt;/code> parameter received contains a &lt;code>Events&lt;/code> property (of type &lt;code>ITvConsoleEvents&lt;/code>) which all events (pending to process) for this iteration. You can use the methods of this property to get a keyboard event and inspect it:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">public&lt;/span> &lt;span style="color:#204a87;font-weight:bold">bool&lt;/span> &lt;span style="color:#000">Update&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">BehaviorContext&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">TControlState&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">updateContext&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000;font-weight:bold">(!&lt;/span>&lt;span style="color:#000">updateContext&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Events&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">HasKeyboardEvents&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">keyEvents&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#000">updateContext&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Events&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">KeyboardEvents&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">consoleKeyInfo&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#000">evt&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AsConsoleKeyInfo&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span> &lt;span style="color:#8f5902;font-style:italic">// Returns the event as a System.ConsoleKeyInfo struct
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000;font-weight:bold">(...)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">evt&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Handle&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span> &lt;span style="color:#8f5902;font-style:italic">// Mark this event as &amp;#34;Handled&amp;#34;.
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="handling-events">Handling events&lt;/h2>
&lt;p>Events can be marked as &amp;ldquo;handled&amp;rdquo; by calling its &lt;code>Handle()&lt;/code> method. When a keyboard event is marked as &amp;ldquo;handled&amp;rdquo; it is no longer returned in the &lt;code>ITvConsoleEvents.KeyboardEvents&lt;/code> property, so it won&amp;rsquo;t be available for the next behaviors. A behavior can process an event and not call its &lt;code>Handle()&lt;/code> method. In this case, this same event will be available to the next behavior, so it could be processed twice (or more).&lt;/p>
&lt;p>As getting the first available (non handled) keyboard event is a typical scenario the &lt;code>ITvConsoleEvents&lt;/code> interface provides a convenient method called &lt;code>AcquireFirstKeyboard&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">@event&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#000">events&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AcquireFirstKeyboard&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">evt&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">evt&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">AsConsoleKeyInfo&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">Key&lt;/span> &lt;span style="color:#000;font-weight:bold">==&lt;/span> &lt;span style="color:#000">_hotkey&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">autoHandle&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You need to pass a predicate, and the method will return the first non handled event that satisfies this predicate (if any). The &lt;code>autoHandle&lt;/code> parameter controls if the event is marked as handled when is returned. If its value is &lt;code>false&lt;/code> you need to manually handle the event (calling &lt;code>Handle()&lt;/code>) if appropiate.&lt;/p></description></item></channel></rss>